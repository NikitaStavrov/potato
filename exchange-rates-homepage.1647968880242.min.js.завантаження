var currenciesJson=[],testExchange=!1;
$("#exchange_currency").ready(function(){0<$("#exchange_currency").length&&$.fn.reloadExchangeRates();var a=$("aside.customer-care ul.cc-content li .cc-body .exchange-inputs .exchange-input input");0<a.length&&a.exists()&&$("#exchange_currency_list").val()&&a.attr("placeholder",$("#exchange_currency_list").val().toUpperCase());$("#exchange_currency_list").on("change",function(){$(this).next("#exchange_currency").val(this.value);a.attr("placeholder",this.value.toUpperCase());$("aside.customer-care ul.cc-content li .cc-body .exchange-switch-text .exchange-switch-currency.js-param1").text(" "+
this.value.toUpperCase());$.fn.reloadExchangeRates()})});function getProcessedDate(a){var b=("0"+a.getDate()).slice(-2),d=("0"+(a.getMonth()+1)).slice(-2);return a.getFullYear()+d+b}function getProcessedTime(a){var b=("0"+a.getHours()).slice(-2)+":",d=("0"+a.getMinutes()).slice(-2)+":",c=("0"+a.getSeconds()).slice(-2)+".";a=("00"+a.getMilliseconds()).slice(-3);return"T"+b+d+c+a}
function getProcessedTimeZone(a){var b=-a.getTimezoneOffset();a=0<b?"+":"-";0>b&&(b=-b);var d=("0"+parseInt(b/60)).slice(-2);b=("00"+b%60).slice(-2);return a+d+b}function getTimeAndTimezone(a){return getProcessedTime(a)+getProcessedTimeZone(a)}function getCurrentDate(){var a=new Date;return getProcessedDate(a)+getTimeAndTimezone(a)}$.fn.countDecimals=function(a){return(a.toString().split(".")[1]||[]).length};
$.fn.isSameDay=function(a,b){return a.getUTCFullYear()==b.getUTCFullYear()&&a.getUTCMonth()==b.getUTCMonth()&&a.getUTCDate()==b.getUTCDate()};var decimalsNo=6;
$.fn.recalculateExchangeRates=function(a){var b="",d,c,g,f;$("#exchange_ratetype").val();var k=$("#exchange_currency").val(),l=$("#exchange_conversiontype").val();$("#error-no-data-exrates").hide();""!==$("#exchange_currencyamount").val()&&parseFloat($("#exchange_currencyamount").val().replace(",","."),10);1;$.each(currencyCalcJson,function(a,e){if(-1!=e.CurrencyCode.toUpperCase().indexOf(k.toUpperCase())){d=!1;setDataRatesAttributes(e);switch(l){case "buy":f=e.CardsPurchaseRate;g=e.CashPurchaseRate;
c=e.MiddleRate;d=!0;break;case "sell":f=e.CardsSaleRate,g=e.CashSaleRate,c=e.MiddleRate,d=!0}var h=currencyAmounts.split(",");if(-1!=enabledCurrenciesExchange.toUpperCase().indexOf(k.toUpperCase())){if(d&&c){e=new Date(e.ExchangeRateUpdatedTimestamp);e.setHours(1);var m=("0"+(e.getMonth()+1)).slice(-2),n=("0"+e.getDate()).slice(-2);b=e.getUTCFullYear()+"-"+m+"-"+n;$("#exchange_date").html(b)}displayResults(f,g,h[a],h[a]);$("#exchange_currencyamount").val(h[a]);$("#amount_units").val(h[a])}}});$("#error-no-data-exrates").show()};
$.fn.reloadExchangeRates=function(){var a=getCurrentDate();var b=$("#exchange_currency").val().toUpperCase();testExchange?(currencyCalcJson=[{CardsMiddleRate:18.492,CardsPurchaseRate:18.12216,CardsSaleRate:18.86184,CashMiddleRate:18.492,CashPurchaseRate:17.622875,CashSaleRate:19.157711,CurrencyCode:"AUD",ExchangeRateUpdatedTimestamp:"2016-07-26T22:00:00Z",MiddleRate:18.517},{CardsMiddleRate:13.818,CardsPurchaseRate:13.54164,CardsSaleRate:14.09436,CashMiddleRate:0,CashPurchaseRate:0,CashSaleRate:0,
CurrencyCode:"BAM",ExchangeRateUpdatedTimestamp:"2016-07-26T22:00:00Z",MiddleRate:0},{CardsMiddleRate:13.815,CardsPurchaseRate:13.5387,CardsSaleRate:14.091301,CashMiddleRate:0,CashPurchaseRate:0,CashSaleRate:0,CurrencyCode:"BGN",ExchangeRateUpdatedTimestamp:"2016-07-26T22:00:00Z",MiddleRate:13.818},{CardsMiddleRate:18.59,CardsPurchaseRate:18.2182,CardsSaleRate:18.9618,CashMiddleRate:18.59,CashPurchaseRate:17.716269,CashSaleRate:19.259239,CurrencyCode:"CAD",ExchangeRateUpdatedTimestamp:"2016-07-26T22:00:00Z",
MiddleRate:18.569},{CardsMiddleRate:24.799,CardsPurchaseRate:24.30302,CardsSaleRate:25.294981,CashMiddleRate:24.799,CashPurchaseRate:23.757444,CashSaleRate:25.642166,CurrencyCode:"CHF",ExchangeRateUpdatedTimestamp:"2016-07-26T22:00:00Z",MiddleRate:24.86},{CardsMiddleRate:3.633,CardsPurchaseRate:3.56034,CardsSaleRate:3.705661,CashMiddleRate:3.633,CashPurchaseRate:3.476782,CashSaleRate:3.763788,CurrencyCode:"DKK",ExchangeRateUpdatedTimestamp:"2016-07-26T22:00:00Z",MiddleRate:3.633},{CardsMiddleRate:27.026,
CardsPurchaseRate:26.485479,CardsSaleRate:27.566521,CashMiddleRate:27.026,CashPurchaseRate:25.890907,CashSaleRate:27.836781,CurrencyCode:"EUR",ExchangeRateUpdatedTimestamp:"2016-07-26T22:00:00Z",MiddleRate:27.025},{CardsMiddleRate:32.297,CardsPurchaseRate:31.65106,CardsSaleRate:32.942941,CashMiddleRate:32.297,CashPurchaseRate:30.940528,CashSaleRate:33.459692,CurrencyCode:"GBP",ExchangeRateUpdatedTimestamp:"2016-07-26T22:00:00Z",MiddleRate:32.291},{CardsMiddleRate:3.169,CardsPurchaseRate:3.10562,CardsSaleRate:3.232381,
CashMiddleRate:0,CashPurchaseRate:0,CashSaleRate:0,CurrencyCode:"HKD",ExchangeRateUpdatedTimestamp:"2016-07-26T22:00:00Z",MiddleRate:3.168},{CardsMiddleRate:3.61,CardsPurchaseRate:3.5378,CardsSaleRate:3.6822,CashMiddleRate:3.61,CashPurchaseRate:3.41145,CashSaleRate:3.77245,CurrencyCode:"HRK",ExchangeRateUpdatedTimestamp:"2016-07-26T22:00:00Z",MiddleRate:3.611},{CardsMiddleRate:8.612,CardsPurchaseRate:8.4398,CardsSaleRate:8.7842,CashMiddleRate:0,CashPurchaseRate:0,CashSaleRate:0,CurrencyCode:"HUF",
ExchangeRateUpdatedTimestamp:"2016-07-26T22:00:00Z",MiddleRate:8.632},{CardsMiddleRate:23.475,CardsPurchaseRate:23.0055,CardsSaleRate:23.9445,CashMiddleRate:23.475,CashPurchaseRate:22.3717,CashSaleRate:24.3201,CurrencyCode:"JPY",ExchangeRateUpdatedTimestamp:"2016-07-26T22:00:00Z",MiddleRate:23.565},{CardsMiddleRate:2.867,CardsPurchaseRate:2.80966,CardsSaleRate:2.924341,CashMiddleRate:2.867,CashPurchaseRate:2.746587,CashSaleRate:2.973079,CurrencyCode:"NOK",ExchangeRateUpdatedTimestamp:"2016-07-26T22:00:00Z",
MiddleRate:2.864},{CardsMiddleRate:17.337,CardsPurchaseRate:16.99026,CardsSaleRate:17.683741,CashMiddleRate:17.337,CashPurchaseRate:16.522161,CashSaleRate:17.961132,CurrencyCode:"NZD",ExchangeRateUpdatedTimestamp:"2016-07-26T22:00:00Z",MiddleRate:17.37},{CardsMiddleRate:6.202,CardsPurchaseRate:6.07796,CardsSaleRate:6.32604,CashMiddleRate:0,CashPurchaseRate:0,CashSaleRate:0,CurrencyCode:"PLN",ExchangeRateUpdatedTimestamp:"2016-07-26T22:00:00Z",MiddleRate:6.195},{CardsMiddleRate:6.049,CardsPurchaseRate:5.92802,
CardsSaleRate:6.169981,CashMiddleRate:0,CashPurchaseRate:0,CashSaleRate:0,CurrencyCode:"RON",ExchangeRateUpdatedTimestamp:"2016-07-26T22:00:00Z",MiddleRate:6.051},{CardsMiddleRate:21.9,CardsPurchaseRate:21.462,CardsSaleRate:22.3381,CashMiddleRate:0,CashPurchaseRate:0,CashSaleRate:0,CurrencyCode:"RSD",ExchangeRateUpdatedTimestamp:"2016-07-26T22:00:00Z",MiddleRate:0},{CardsMiddleRate:37.2,CardsPurchaseRate:33.4845,CardsSaleRate:40.9245,CashMiddleRate:0,CashPurchaseRate:0,CashSaleRate:0,CurrencyCode:"RUB",
ExchangeRateUpdatedTimestamp:"2016-07-26T22:00:00Z",MiddleRate:37.074},{CardsMiddleRate:2.845,CardsPurchaseRate:2.7881,CardsSaleRate:2.901901,CashMiddleRate:2.845,CashPurchaseRate:2.725511,CashSaleRate:2.950265,CurrencyCode:"SEK",ExchangeRateUpdatedTimestamp:"2016-07-26T22:00:00Z",MiddleRate:2.841},{CardsMiddleRate:18.092,CardsPurchaseRate:17.73016,CardsSaleRate:18.45384,CashMiddleRate:0,CashPurchaseRate:0,CashSaleRate:0,CurrencyCode:"SGD",ExchangeRateUpdatedTimestamp:"2016-07-26T22:00:00Z",MiddleRate:18.107},
{CardsMiddleRate:8.08,CardsPurchaseRate:7.9184,CardsSaleRate:8.2416,CashMiddleRate:0,CashPurchaseRate:0,CashSaleRate:0,CurrencyCode:"TRY",ExchangeRateUpdatedTimestamp:"2016-07-26T22:00:00Z",MiddleRate:8.069},{CardsMiddleRate:24.584,CardsPurchaseRate:24.092319,CardsSaleRate:25.075681,CashMiddleRate:24.584,CashPurchaseRate:23.551471,CashSaleRate:25.321521,CurrencyCode:"USD",ExchangeRateUpdatedTimestamp:"2016-07-26T22:00:00Z",MiddleRate:24.573}],$.fn.recalculateExchangeRates(!1)):(iterDateExRate=0,$.fn.callExRatesService(b,
a,a))};
$.fn.callExRatesService=function(a,b,d){a&&$.ajax({url:"/cwa/GetExchangeRatesSidemenu",type:"POST",beforeSend:function(a){a.setRequestHeader("EntityCode",entityCode);a.setRequestHeader("UserID","");a.setRequestHeader("Language",languageCode);a.setRequestHeader("SourceSystem","PWS");a.setRequestHeader("Product","PWS")},contentType:"application/json",data:"{'Currency': '"+a+"','DateFrom':'"+b+"','DateTo':'"+d+"'}",processData:!1,success:function(c,d,f){-1!=(f.getResponseHeader("content-type")||"").indexOf("json")?
"status"in c||null==c?(currencyCalcJson=null,$("#exchange_currencylist").hide()):(currencyCalcJson=c,0<currencyCalcJson.length?$.fn.recalculateExchangeRates():iterDateExRate<dateLastExRate&&(c=new Date(b.substr(0,4),b.substr(4,2)-1,b.substr(6,2)),c.setDate(c.getDate()-1),c=getProcessedDate(c)+getProcessedTime(c)+getProcessedTimeZone(c),iterDateExRate++,$.fn.callExRatesService(a,c,c))):(currencyCalcJson=null,displayResults(0,0,0,0),$("#exchange-rate-value").exists()&&$("#rates_calculator \x3e p").remove(),
resetDataRatesAttributes())},error:function(a){displayResults(0,0,0,0);$("#exchange-rate-value").exists()&&$("#rates_calculator \x3e p").remove();resetDataRatesAttributes()}})};function resetDataRatesAttributes(){$("#forex").attr("data-buy",0).attr("data-sell",0);$("#forexCash").attr("data-buy",0).attr("data-sell",0);$("#currency_amount").text(0);$("#exchange_currencyamount").val(0)}
function setDataRatesAttributes(a){$("#forex").attr("data-buy",a.CardsPurchaseRate).attr("data-sell",a.CardsSaleRate);$("#forexCash").attr("data-buy",a.CashPurchaseRate).attr("data-sell",a.CashSaleRate)}
function calculateExchange(){var a=$("aside.customer-care ul.cc-content li .cc-body").find(".exchange-switch .exchange-switch-button.active").data("operation"),b=$("#exchange_currencyamount").val();b=b.replace(",",".");b=""==b?0:parseFloat(b);var d=parseFloat($("#amount_units").val());displayResults($("#forex").attr("data-"+a),$("#forexCash").attr("data-"+a),b,d)}
function displayResults(a,b,d,c){var g=0,f=0;0<c&&(g=a*d/c,f=b*d/c,isNaN(g)&&(g=0),isNaN(f)&&(f=0));$("#forex").text(g.toFixed(decimalsNo));$("#forexCash").text(f.toFixed(decimalsNo))};